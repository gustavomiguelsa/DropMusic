<!DOCTYPE html>
<html lang="eng">
	<head>
		<title>DropMusic</title>
		<meta charset="utf-8">
		<meta name="description" content="A uni project...">
		<meta name="author" content="Bruno Ferreira and Gustavo Assunção">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"></script>
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"></script>
		<link rel="stylesheet" type="text/css" href="myStyle.css">
	</head>
	
	<script type="text/javascript" src="db_to_js.php"></script>

	<script>
	
	/* Calls the register.php with the data given by the user */
	function registerFunction(){
		var username=document.getElementById("in_username_reg").value;
		var birthday=document.getElementById("in_ddn_reg").value;
		var gender="A";
		if(document.getElementById('gender_Male').checked) {
		  //Male radio button is checked
			gender="M";
		}
		else if(document.getElementById('gender_Female').checked) {
		  //Female radio button is checked
			gender="F";
		}
		else if(document.getElementById('gender_Other').checked) {
			//Other radio button is checked
			gender="O";
		}
		
		var dtToday = new Date();
		/* Obtain the current date which will be the maximum date input */
	        var month = dtToday.getMonth() + 1;
	        var day = dtToday.getDate();
	        var year = dtToday.getFullYear();

	        if(month < 10)
			month = '0' + month.toString();
	        if(day < 10)
			day = '0' + day.toString();
	        var maxDate = year + '-' + month + '-' + day;

		/* Debbuging purposes only: */	
		console.log(username);
		console.log(birthday);
		console.log(gender);
		console.log(maxDate);
		/* ---------------- */

		if(birthday>maxDate){
			alert("You inserted an invalid date! Please change!");
			cleanRegisterFunction();
			document.getElementById('gender_Male').checked = false;
			document.getElementById('gender_Female').checked = false;
			document.getElementById('gender_Other').checked = false;
		}
		if(gender="A" || username="" || birthday=""){
			alert("You didn't fill all the required fields!");
			cleanRegisterFunction();
			document.getElementById('gender_Male').checked = false;
			document.getElementById('gender_Female').checked = false;
			document.getElementById('gender_Other').checked = false;
		}
		if(username != "" && birthday != "" && gender !="A" && birthday<=maxDate){
		
			$.ajax({
				url:"register.php",
				type:"POST",
				dataType: "json",
				data:{
					b: birthday,
					u: username,
					g: gender
				}


			}).done(function(data){

				//document.getElementById("in_username_reg").reset();			
			});
		}
	}
	/* To clean the input values */
	function cleanRegisterFunction(){
		document.getElementById("in_username_reg").value= "";
		document.getElementById("in_ddn_reg").value= "";
		
	}
	/* To clean the input values from the login form */
	function cleanLoginFunction(){
		document.getElementById("in_name_log").value= "";
	}

	</script>
	<body style="background-color: lightblue">
		<div class="container" id="topNav">
			
			<nav class="navbar navbar-expand-sm bg-light justify-content-center" id="navTop">
				<a class="navbar-brand" href="main.html">
					<img src="logo.png" alt="Logo">
				</a>
				
				<form class="form-inline" action="searchBar.php">
					<input class="form-control srch-marginl" type="text" placeholder="Search.." id="srch-term">
					<button class="btn btn-primary btn-marginl" type="submit">Search</button>
				</form>
			</nav>
			
			<nav class="navbar navbar-expand-sm bg-light justify-content-center" id="navMid">
				<ul class="navbar-nav mr-auto">
					<li class="nav-item">
						<a class="nav-link" href="#home">Home</a>
					</li>	
					<li class="nav-item">
						<a class="nav-link" href="#about">About</a>
					</li>
					<li class="nav-item">
						<a class="nav-link" href="#help">Help</a>
					</li>
					<li class="nav-item dropdown">
					  <a class="nav-link dropdown-toggle" href="#" id="navbardrop" data-toggle="dropdown">
						View
					  </a>
					  <div class="dropdown-menu">
						<a class="dropdown-item" href="#">Songs</a>
						<a class="dropdown-item" href="#">Albums</a>
						<a class="dropdown-item" href="#">Reviews</a>
						<a class="dropdown-item" href="#">Playlists</a>
						<a class="dropdown-item" href="#">Bands</a>
						<a class="dropdown-item" href="#">Musicians</a>
						<a class="dropdown-item" href="#">Composers</a>
					  </div>
					</li>
				</ul>
				<ul class="navbar-nav">
					<button type="button" class="btn btn-primary " data-toggle="modal" data-target="#RegisterModal">
  Register
</button>
					<button type="button" class="btn btn-primary btn-marginl" data-toggle="modal" data-target="#LoginModal">
  Login
</button> 
				
				</ul>
			</nav>
			
		</div>
		

	
		
		<div class="container" id="rec_add_table">
		  <h2>Recently Added</h2>           
		  <table class="table table-hover">
		    <thead>
		      <tr>
			<th>Song</th>
			<th>User</th>
			<th>Date</th>
		      </tr>
		    </thead>
		    <tbody>
		      <tr>
			<td>array_users[0]</td>
			<td></td>
			<td></td>
		      </tr>
		      <tr>
			<td>array_users[1]</td>
			<td></td>
			<td></td>
		      </tr>
		      <tr>
			<td>array_users[2]</td>
			<td></td>
			<td></td>
		      </tr>
		    </tbody>
		  </table>
		</div>
		
          	<div class="container">
		  <h2>Shows Playing This Week</h2>           
		  <table class="table table-hover">
		    <thead>
		      <tr>
			<th>Show Name</th>
			<th>Band</th>
			<th>Date</th>
			<th>Location</th>
		      </tr>
		    </thead>
		    <tbody>
		      <tr>
			<td></td>
			<td></td>
			<td></td>
			<td></td>
		      </tr>
		      <tr>
			<td></td>
			<td></td>
			<td></td>
			<td></td>
		      </tr>
		      <tr>
			<td></td>
			<td></td>
			<td></td>
			<td></td>
		      </tr>
		    </tbody>
		  </table>
		</div>

		<div class="container">
		  <h2>Most Popular Playlists</h2>           
		  <table class="table table-hover">
		    <thead>
		      <tr>
			<th>Playlist Name</th>
			<th>Owner</th>
			<th>Users</th>
		      </tr>
		    </thead>
		    <tbody>
		      <tr>
			<td></td>
			<td></td>
			<td></td>
		      </tr>
		      <tr>
			<td></td>
			<td></td>
			<td></td>
		      </tr>
		      <tr>
			<td></td>
			<td></td>
			<td></td>
		      </tr>
		    </tbody>
		  </table>
		</div>
		
		<div class="container">
		  <h2>Born Today</h2>           
		  <table class="table table-hover">
		    <thead>
		      <tr>
			<th>User</th>
			<th>Musician</th>
			<th>Composer</th>
		      </tr>
		    </thead>
		    <tbody>
		      <tr>
			<td></td>
			<td></td>
			<td></td>
		      </tr>
		      <tr>
			<td></td>
			<td></td>
			<td></td>
		      </tr>
		      <tr>
			<td></td>
			<td></td>
			<td></td>
		      </tr>
		    </tbody>
		  </table>
		</div>


		<div class="container" id="footer">
			Proudly brought to you by Bruno Ferreira & Gustavo Assunção!
		</div>


		<!-- Login Modal -->
		<div class="modal" id="LoginModal">
		  <div class="modal-dialog">
		    <div class="modal-content">

		      <!-- Modal Header -->
		      <div class="modal-header">
			<h4 class="modal-title">Login</h4>
			<button type="button" class="close" data-dismiss="modal">&times;</button>
		      </div>

		      <!-- Modal body -->
		      <div class="modal-body">
			<img class="img-fluid mx-auto d-block" src="user.png" alt="">
			<form action="login.php" class="form-inline justify-content-center">
				<div class="log-center">
					<input type="text" placeholder="Username" id="in_name_log">
				</div>
				
			</form>
		      </div>

		      <!-- Modal footer -->
		      <div class="modal-footer">
			<button type="button" class="btn btn-danger" data-dismiss="modal">Ok!</button>
	                <button onclick="cleanLoginFunction()" type="button" class="btn btn-danger">Reset!</button>
		      </div>

		    </div>
		  </div>
		</div>
		
		<!-- Register Modal -->
		<div class="modal" id="RegisterModal">
		  <div class="modal-dialog">
		    <div class="modal-content">

		      <!-- Modal Header -->
		      <div class="modal-header">
			<h4 class="modal-title">Register</h4>
			<button type="button" class="close" data-dismiss="modal">&times;</button>
		      </div>

		      <!-- Modal body -->
		      <div class="modal-body justify-content-center">
			<img class="img-fluid mx-auto d-block" src="user.png" alt=""><br>
			<form action="register.php" method="POST">
				<div class = "reg-center">
					<label for="text">Username:</label>
					<input id="in_username_reg" type="text" placeholder="Username" maxlength="20">
				</div>
				<div class ="reg-center">
					<input type="radio" name="gender" value="male" id="gender_Male"> Male
					<input type="radio" name="gender" value="female" id="gender_Female"> Female
					<input type="radio" name="gender" value="other" id="gender_Other"> Other
				</div>
				<div class = "reg-center">
					<label for="text">Birthday:</label>
					<input type="date" placeholder="Birthday Date:" id="in_ddn_reg">
				</div>
				
			</form>
		      </div>

		      <!-- Modal footer -->
		
			      <div class="modal-footer">
				<button onclick="registerFunction()" type="button" class="btn btn-danger" data-dismiss="modal">Ok!</button>
				<button onclick="cleanRegisterFunction()" type="button" class="btn btn-danger">Reset!</button>
			      </div>
		     
		    </div>
		  </div>
		</div>
	</body>
</html>
